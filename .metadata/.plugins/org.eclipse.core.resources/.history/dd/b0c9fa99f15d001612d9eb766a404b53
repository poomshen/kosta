import java.io.BufferedOutputStream;
import java.io.DataOutputStream;
import java.io.IOException;
import java.net.ServerSocket;
import java.net.Socket;
import java.util.Scanner;

public class Ex07_TCP_Chatt_Server {
	public static void main(String[] args) {
		Scanner sc = new Scanner(System.in);
		try {
			ServerSocket  serverSocket = new ServerSocket(9999);
			 Socket socket = serverSocket.accept();
			 System.out.println("시스템 접속");
			 
			 class ServerSend extends Thread {
				 @Override
				public void run() {
					 DataOutputStream  dos = new DataOutputStream(socket.getOutputStream());
					 dos.writeUTF(msg);
					 
					 System.out.println("보내실 문자 :");
					 String msg = sc.nextLine();
							while(true){
								System.out.print("서버에 전송할 메시지 입력 :");
								String  msg = sc.nextLine();
								//서버에 전송
								dos.writeUTF(msg);
								dos.flush();
								
								if(msg.equals("exit"))break;
								
								//서버에서 전송된 메시지 read 
							    String rmsg  = dis.readUTF();
							    System.out.println("Echo 메시지 : "+ rmsg );
							}
				}
			 }
			 
			 
		} catch (IOException e) {
			// TODO Auto-generated catch block
			e.printStackTrace();
		}
		
	}
}
